"use strict";
var generateModuleId = require("./generateModuleId");
module.exports = function (babel) {
    return {
        visitor: {
            ImportDeclaration: function (path) {
                if (path.get("source").node.value.endsWith("?id")) {
                    var specifiers = path.get("specifiers");
                    for (var i = 0; i < specifiers.length; i++) {
                        var spec = specifiers[i];
                        if (babel.types.isImportDefaultSpecifier(spec)) {
                            var local = spec.get("local").node.name;
                            var source = path.get("source").node.value.slice(0, -3);
                            var newNode = babel.template.statement.ast("const ".concat(local, " = \"").concat(generateModuleId(source), "\""));
                            path.insertAfter(newNode);
                            path.remove();
                        }
                    }
                }
            },
        },
    };
};
//# sourceMappingURL=replace-import-with-id.js.map