"use strict";
var finder = require("find-package-json");
var path = require("path");
/**
 *
 * @param {string} source source must resolve when used with require.resolve
 * @return <package_name>/<relative_path_to_module> or <package_name>
 */
function generateModuleId(source) {
    try {
        var sourcePath = require.resolve(source);
        var packageJSONfinder = finder(sourcePath).next();
        var packageJSONPath = packageJSONfinder.filename;
        var packageJSON = packageJSONfinder.value;
        var packageName = packageJSON["name"];
        var relativeSourcePath = path.relative(path.dirname(packageJSONPath), sourcePath);
        var unixRelativeSourcePath = relativeSourcePath
            .split(path.sep)
            .join(path.posix.sep);
        return "".concat(packageName, "/").concat(unixRelativeSourcePath);
    }
    catch (err) {
        // if a package is referred instead of a module, then use package name as id
        return source;
    }
}
module.exports = generateModuleId;
//# sourceMappingURL=generateModuleId.js.map